var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();(function(){var h,d,p,m,k,c,j,a,e,b,o,q,f,n,i=[].slice,l={}.hasOwnProperty,g=function(u,s){for(var r in s){if(l.call(s,r)){u[r]=s[r]}}function t(){this.constructor=u}t.prototype=s.prototype;u.prototype=new t();u.__super__=s.prototype;return u};n="static.tambur.io/";b="balancer.tambur.io";e="api.tambur.io";o=0;q=[];h=(function(){var s;function r(){var D,y,E,C,B,A,z,x,w,v,u,t;E=arguments[0],D=2<=arguments.length?i.call(arguments,1):[];this.socket_impl=E;this.id=o+=1;q[this.id]=this;this.streams={};this.waiting_cmds=[];this.call_handlers={};this.nr_of_calls=0;this.no_auto_connect=false;if(D.length===1&&typeof D[0]==="object"){y=D[0];this.api_key=y.api_key;this.app_id=y.app_id;this.ready=(C=y.ready)!=null?C:function(){};this.onclose=(B=y.onclose)!=null?B:function(){};this.ssl=(A=y.ssl)!=null?A:false;this.max_retries=(z=y.max_retries)!=null?z:10;this.no_auto_connect=(x=y.no_auto_connect)!=null?x:false}else{this.api_key=D[0];this.app_id=D[1];this.ssl=(w=D[2])!=null?w:false;this.ready=(v=D[3])!=null?v:function(){};this.onclose=(u=D[4])!=null?u:function(){};this.max_retries=(t=D[5])!=null?t:10}if(!this.no_auto_connect&&this.socket_impl){s.call(this)}}s=function(){return j.jsonp(""+(j.proto(this.ssl))+"//"+b+"/"+this.api_key+"/"+this.app_id+"?instance="+this.id+"&callback=tambur.Utils.connect_callback")};r.prototype.close=function(){var t;this.closed_normaly=true;return(t=this.socket)!=null?t.close():void 0};r.prototype.reopen=function(){this.reconnecting=true;return s.call(this)};r.prototype.get_stream=function(t){var u;if(this.streams[t]){return this.streams[t]}else{u=new c(this,t);this.streams[t]=u;return u}};r.prototype.send=function(){var t,w,v,u;w=arguments[0],u=arguments[1],t=3<=arguments.length?i.call(arguments,2):[];if(this.subscriber_id){v=this.nr_of_calls+=1;w=[w,v];this.call_handlers[v]=u;return this.socket.send(JSON.stringify(w.concat(t)))}else{return this.waiting_cmds.push([w,u,t])}};r.prototype.connect=function(t,v){var u,w=this;u=this.ssl||(document.location.protocol==="https:")?"wss://":"ws://";this.socket=new this.socket_impl(""+u+v);this.socket.onopen=function(){return tambur.Logger.debug("socket["+t+"] onopen")};this.socket.onmessage=function(I){var E,x,B,D,H,z,G,C,F,A,y;tambur.Logger.debug("socket["+t+"] onmessage: "+I.data);w.retry=0;if(!w.subscriber_id){w.subscriber_id=I.data.substr(3);while(w.waiting_cmds.length){A=w.waiting_cmds.pop(),x=A[0],H=A[1],E=A[2];w.send.apply(w,[x,H].concat(i.call(E)))}if(w.reconnecting){y=w.streams;for(C in y){F=y[C];F.reopen()}}w.reconnecting=false;w.ready()}else{I=JSON.parse(I.data);if(I[0]==="ack"){D=I[1];if(D>0){z=I[2];w.call_handlers[D](z)}else{throw"process error "+I[2]}}else{if(I[0]==="msg"){G=I[1];if(w.streams[G]!=null){B=I.splice(2);w.streams[G].dispatch(B)}}}}return w.nr_of_messages+=1};return this.socket.onclose=function(){var z,y,x,A;tambur.Logger.debug("socket["+t+"] onclose");w.subscriber_id=void 0;w.socket=void 0;w.nr_of_messages=0;A=w.streams;for(y in A){x=A[y];x.conn_close()}if(!w.closed_normaly&&!w.no_auto_connect){w.reconnecting=true;z=w.retry;if(w.retry<w.max_retries){setTimeout(function(){tambur.Logger.debug("reconnect");return s.call(w)},1000);z+=1}}return w.onclose()}};return r})();a=(function(t){var r;g(s,t);function s(){var u;u=1<=arguments.length?i.call(arguments,0):[];s.__super__.constructor.apply(this,[r()].concat(i.call(u)))}r=function(){return window.WebSocket||window.MozWebSocket};return s})(h);k=(function(t){var s;g(r,t);function r(){var u,v=this;u=1<=arguments.length?i.call(arguments,0):[];if(swfobject.hasFlashPlayerVersion("1")){this.conn=r.__super__.constructor.apply(this,[void 0].concat(i.call(u)));window.WEB_SOCKET_SWF_LOCATION=""+(j.proto())+n+"WebSocketMainInsecure.swf";j.fetch_js("web_socket.min.js",function(){return s.call(v)});this}else{tambur.Logger.error("we cannot fallback to flash, please install flash")}}s=function(){tambur.Logger.debug("trigger_flash_socket_init returned, start with normal socket init");this.socket_impl=WebSocket;return this.reopen()};return r})(h);p=(function(r){g(s,r);function s(){var t;t=1<=arguments.length?i.call(arguments,0):[];s.__super__.constructor.apply(this,[d].concat(i.call(t)))}return s})(h);m=(function(r){g(s,r);function s(){return s.__super__.constructor.apply(this,arguments)}s.get_connection=function(){var t;t=1<=arguments.length?i.call(arguments,0):[];if(window.WebSocket||window.MozWebSocket){return(function(y,v,x){x.prototype=y.prototype;var z=new x,u=y.apply(z,v),w=typeof u;return w=="object"||w=="function"?u||z:z})(a,t,function(){})}else{if(swfobject.hasFlashPlayerVersion("1")){return(function(y,v,x){x.prototype=y.prototype;var z=new x,u=y.apply(z,v),w=typeof u;return w=="object"||w=="function"?u||z:z})(k,t,function(){})}else{return(function(y,v,x){x.prototype=y.prototype;var z=new x,u=y.apply(z,v),w=typeof u;return w=="object"||w=="function"?u||z:z})(p,t,function(){})}}};return s})(h);d=(function(){var s;r.comet_counter=0;r.instances=[];function r(u){var t,v,w=this;this.id=r.comet_counter+=1;r.instances[this.id]=this;this.head=document.getElementsByTagName("head").item(0);t=document.createElement("a");t.href=u.indexOf("wss://")===0?"ws://"+u.slice(6):u;v=t.pathname.split("/");this.connection_string="https://"+t.host+"/comet/"+v[1]+"/"+v[2]+"/";j.jsonp("https://"+t.host+"/comet"+t.pathname+"?instance="+this.id+"&callback=tambur.Comet.oninit&ts="+(Date.now()),function(){return s.call(w)})}r.prototype.onmessage=function(){};r.prototype.onclose=function(){};r.prototype.onopen=function(){};r.prototype.close=function(){this.onclose();this.send("fin");return delete r.instances[this.id]};r.prototype.send=function(t){if(t==="fin"){this.got_fin=true}return j.jsonp(""+this.connection_string+"&callback=tambur.Comet.receive&data="+(encodeURIComponent(t))+"&ts="+(Date.now()))};r.oninit=function(v,u){var t;t=r.instances[v];t.onopen();t.connection_string=""+t.connection_string+(u.substr(3))+"?instance="+t.id;return t.onmessage({data:u})};r.receive=function(v,u){var t;t=r.instances[v];return t.onmessage({data:JSON.stringify(u)})};r.polling=function(v,u){var t;t=r.instances[v];return t.onmessage({data:JSON.stringify(u)})};s=function(){var t=this;if(!this.got_fin){return j.jsonp(""+this.connection_string+"&callback=tambur.Comet.polling&ts="+(Date.now()),function(){return s.call(t)})}};return r})();window.onbeforeunload=function(){var s,u,r,t;t=tambur.Comet.instances;for(u=0,r=t.length;u<r;u++){s=t[u];s.send("fin")}};c=(function(){var r,v,u,s;function t(w,x){this.connection=w;this.stream=x;this.onmessage=function(){};if(x==="private"){this.is_private=true}else{this.ready=function(){};this.onauth=function(){};this.onpresence=function(){};this.ondirect=function(){};this.onenabled=function(){};this.ondisabled=function(){};this.enabled_modes={auth:false,presence:false,direct:false};this.direct_user_id=false;s.call(this)}}t.prototype.close=function(){var w=this;if(!this.active){throw {name:"Stream Error",message:"Stream is inactive"}}return this.connection.send("unsubscribe",(function(x){if(x==="ok"){return w.active=false}}),this.stream)};t.prototype.reopen=function(){return s.call(this)};t.prototype.enable_auth=function(w){return u.call(this,"auth",w)};t.prototype.enable_presence=function(w,x){return u.call(this,"presence",w,x)};t.prototype.enable_direct=function(w,x){return u.call(this,"direct",this.direct_user_id=w,x)};t.prototype.disable_auth=function(){return v.call(this,"auth")};t.prototype.disable_presence=function(){return v.call(this,"presence")};t.prototype.disable_direct=function(){return v.call(this,"direct",this.direct_user_id)};t.prototype.conn_close=function(){return this.active=false};t.prototype.dispatch=function(y){var w,x;x=y[0],w=y[1];tambur.Logger.debug("stream[ "+this.stream+" ] dispatch for mode: "+x+" data: "+w);switch(x){case"auth":return this.onauth(w);case"presence":return this.onpresence(w);case"direct":return this.ondirect(w);default:return this.onmessage(w)}};t.prototype.direct_msg=function(w,x){var y=this;if(!this.active){throw {name:"Stream Error",message:"You cannot send a direct message through an inactive stream"}}if(this.enabled_modes.direct===false){throw {name:"Stream Error",message:"Direct Mode is not enabled"}}return this.connection.send("direct",(function(z){if(z==="ok"){return tambur.Logger.debug("message dispatched to "+w)}else{return tambur.Logger.error("not able to dispatch message: "+x+" for reason "+z)}}),this.stream,w,x)};s=function(){var w=this;if(this.active){throw {name:"Stream Error",message:"Stream is already active"}}return this.connection.send("subscribe",(function(x){if(x==="ok"){w.active=true;return w.ready()}else{if(x==="already_subscribed"){throw {name:"Stream Error",message:"Stream is already subscribed"}}}}),this.stream)};u=function(){var w;w=1<=arguments.length?i.call(arguments,0):[];return r.call.apply(r,[this,"set_mode"].concat(i.call(w)))};v=function(){var w;w=1<=arguments.length?i.call(arguments,0):[];return r.call.apply(r,[this,"unset_mode"].concat(i.call(w)))};r=function(){var w,y,z,x,A=this;y=arguments[0],z=arguments[1],w=3<=arguments.length?i.call(arguments,2):[];if(!this.active){throw {name:"Stream Error",message:"Stream is inactive"}}if(y==="set_mode"&&this.enabled_modes[z]){throw {name:"Mode Error",message:"Mode is already enabled"}}if(y==="unset_mode"&&this.enabled_modes[z]===false){throw {name:"Mode Error",message:"Mode is not enabled"}}return(x=this.connection).send.apply(x,[y,(function(B){if(B==="ok"){if(y==="set_mode"){A.enabled_modes[z]=true;return A.onenabled(z)}else{if(y==="unset_mode"){A.enabled_modes[z]=false;return A.ondisabled(z)}}}}),z,this.stream].concat(i.call(w)))};return t})();j=(function(){function r(){}r.proto=function(t){var s;s=document.location.protocol;if((s==="https:")||t){return"https://"}else{return"http://"}};r.jsonp=function(t,v){var u,s;s=document.createElement("script");s.setAttribute("type","text/javascript");s.setAttribute("src",t);u=function(){if(v){v()}return document.getElementsByTagName("head")[0].removeChild(s)};s.onreadystatechange=u;s.onload=u;if(s){document.getElementsByTagName("head")[0].appendChild(s)}return s};r.fetch_js=function(s,u,t){return this.jsonp(""+(this.proto(t))+"//"+n+s,u)};r.connect_callback=function(t,u){var s;s=q[t];return s.connect(t,u)};r.ajax=function(y,w,v,t,s){var x;x=void 0;t=t!=null?t:function(){};s=s!=null?s:function(){};try{x=new XMLHttpRequest()}catch(u){try{x=new ActiveXObject("Microsoft.XMLHTTP")}catch(u){try{x=new ActiveXObject("Msxml2.XMLHTTP")}catch(u){tambur.Logger.error("can't use ajax in this browser")}}}if(x){x.open(y,w,true);if(v){x.setRequestHeader("Content-type","application/x-www-form-urlencoded")}x.onreadystatechange=function(){if(x.readyState===4){if(x.status===204||x.status===200){return t(x.responseText)}else{return s(x.responseText)}}};if((v!=null)&&y==="POST"){x.send(v)}else{x.send()}return true}else{return false}};return r})();f=function(w,r,t){var z,x,u,y,v,s;if(arguments.length<3){v=[(typeof exports!=="undefined"?exports:window)].concat(i.call(arguments)),w=v[0],r=v[1],t=v[2]}x=w;s=r.split(".");for(u=0,y=s.length;u<y;u++){z=s[u];w=w[z]||(w[z]={})}return t(w,x)};f("tambur",function(r){r.Comet=d;r.Utils=j;if(window.TAMBUR_FORCE_FLASH){r.Connection=function(){var s;s=1<=arguments.length?i.call(arguments,0):[];return(function(y,v,x){x.prototype=y.prototype;var z=new x,u=y.apply(z,v),w=typeof u;return w=="object"||w=="function"?u||z:z})(k,s,function(){})}}else{if(window.TAMBUR_FORCE_COMET){r.Connection=function(){var s;s=1<=arguments.length?i.call(arguments,0):[];return(function(y,v,x){x.prototype=y.prototype;var z=new x,u=y.apply(z,v),w=typeof u;return w=="object"||w=="function"?u||z:z})(p,s,function(){})}}else{r.Connection=function(){var s;s=1<=arguments.length?i.call(arguments,0):[];return m.get_connection.apply(m,s)}}}if(window.TAMBUR_DEBUG){if(window.TAMBUR_LOGGER){return r.Logger=window.TAMBUR_LOGGER}else{if(window.console&&window.console.log&&window.console.error){return r.Logger=window.console}else{return r.Logger={log:function(){},error:function(){},debug:function(){}}}}}else{return r.Logger={log:function(){},error:function(){},debug:function(){}}}});if(!window.JSON){j.fetch_js("json2.min.js")}}).call(this);