(function(a){function i(a){return a[0]}function j(a){return a[a.length-1]}function k(a){return a.slice(0,a.length-1)}function l(){var a="",b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz",d;a+=(new Date).getTime();c+=1;a+="-"+c+"-";if(c===9999999){c=999999}for(d=0;d<25;d+=1){a+=b[Math.floor(Math.random()*b.length)]}return a}function m(a,b){var c,d=a.length,e=[];for(c=0;c<d;c+=1){e.push(b(a[c],c))}return e}function n(a,b){var c,d,f={};for(c in a){if(Object.prototype.hasOwnProperty.call(a,c)){d=b(a[c],c);if(d!==e){f[c]=d}}}return f}function o(){}function p(){}function q(a){return a.slice(0,9)==="_internal"}function r(a,b,c){function f(){}var e;if(b===g&&c){throw new Error("Attempt to subscribe to an internal event without first registering the event.")}e=l();d[e]={};f.prototype={_dirEvents:d[e],_dirEventsKey:e,_parentDir:b,_dirName:a};return new f}function s(a,b,c,d){var f=a._dirEvents;if(b){f[b].apply(null,c);return true}n(f,function(a){a.apply(null,c)});if(!d){return true}return n(a,function(a,f){if(i(f)==="_"){return e}return s(a,b,c,d)})}function t(){if(/in/.test(a.document.readyState)){return a.setTimeout(t,100)}return h.fire("docReady")}"use strict";var b=b||null,c=999999,d={},e={},f,g,h;f=new o;g=new p;h={fire:function(a,b,c){var d,e,h,i,l;if(typeof b==="string"){e=[];h=b}else{e=b;h=c}if(q(a)){a=a.slice(10);l=g}else{l=f}if(j(a)==="*"){i=true;d=k(k(a)).split("/")}else{d=a.split("/")}m(d,function(a){l=l[a]});if(!l){return false}return s(l,h,e,i)},listen:function(a,b,c){var d=c||l(),e,h;if(q(a)){a=a.slice(10);h=g}else{h=f}e=a.split("/");m(e,function(a){h[a]=h[a]||r(a,h,true);h=h[a]});h._dirEvents[d]=b;this.fire("_internal/newListener",[a,b,d]);return d},registerInternal:function(){m(arguments,function(a){var b=g,c=a.split("/");m(c,function(a){b[a]=b[a]||r(a,b,false);b=b[a]})});return true},remove:function(a,b){var c,e;if(q(a)){a=a.slice(10);e=g}else{e=f}c=a.split("/");m(c,function(a){e=e[a]});if(b){delete e._dirEvents[b];this.fire("_internal/rmListener",[a,b]);return true}delete d[e._dirEventsKey];delete e._parentDir[e._dirName];this.fire("_internal/rmEvent",[a]);return true},attempt:function(a,b,c){var d,e,f;if(typeof a==="function"){e=a;f=b}else{d=a;e=b;f=c}try{e()}catch(g){if(d){this.fire(d,[g,e],f)}this.fire("_internal/tryError",[g,e],f)}},getEvents:function(){return f},getInternalEvents:function(){return g},docReady:function(a){this.listen("docReady",a)}};h.registerInternal("newListener","rmEvent","rmListener","tryError");if(a.constructor.name==="Window"){t()}if(a.define&&typeof a.define===fun&&a.define.amd){a.define("SHOTGUN",[],h)}else if(b&&b.exports){b.exports=h}else{a.SHOTGUN=a.SG=h}})(this)